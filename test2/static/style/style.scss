@import "pure";
 
// Типография

$default_font_size: 16px;
$increased_font_size: 18px;
$title_font_size: 29.9px;

// Стандартный бордюр
$border: 1px lightgrey solid;


// Хелперы и миксины

.box {
	border: $border;
}


// Хедеры и футеры

body>header, body>footer {
	width: 100%;
	height: 72px;
	
	background-color: DarkGrey;
}

div#main {
	display: flex;
	justify-content: space-between; 

	min-width: 960px;
	width: 80%;
	min-height: 80%;
	
	margin: 60px auto;
}

// Две колонки главных

div#sidebar {
	order: 1;
	flex-basis: 25%;
}

div#content_column {
	order: 2;
	flex-basis: 65%;
	
	@extend .box;
}


// Сайдбар

$header_max_height: 56px;

@mixin simple-header {
	// Внешний вид + бордюр снизу заголовка
	
	color: #565d64;
	font-size: $title_font_size;
	
	border-bottom: $border;
	
	padding: 10px 15px;

	max-height: $header_max_height; 
		//%HACK: Делаем все блоки с заголовсками одинаковой высоты
}

@mixin menu-header {
	@extend .pure-menu-heading;
	
	// Обезвреживаем настройки PureCSS
	text-transform: none;
	margin-top: 0;
	line-height: inherit;
	
	@include simple-header;
}

div#sidebar > nav {
	@extend .pure-menu;
	@extend .pure-menu-open;
	@extend .box;
			
	// Для всех элементов кроме первого
	&:nth-child(1n+2) {
		// Отступы между меню
		margin-top: 25px;
	}

	header {
		@include menu-header;
	}

	li a {
		padding: 10px 15px;
	}
}

// Колонка товаров

div#content_column>header {
	margin-bottom: 50px;
	
	height: $header_max_height;
	max-height: $header_max_height;
	// %HACK: Нужно устонавливать высоту соразмерно названию в div.title 

	border-bottom: $border;

	display: flex;
	justify-content: space-between;
	
	div.title {
		@include simple-header;
		border-bottom: none;
	}	

	div.product_controls{
		height: 100%;
		width: 183px;
		
		box-sizing: border-box;
		padding: 15px;
				
		border-left: $border;
		
		display: flex;
		
		div:nth-child(2){
			margin-left: 20px;
		}

		i {
			margin-left: 4px;
		
			color: grey;
			font-size: 25px;
		}
	}
}


// Список товаров и каждый конкретный товар

@mixin product-list {
	/* Список товаров, как в интернет магазине. */

	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: flex-start;

	padding: 0 30px;
}

div#content {
	@include product-list;
		
	article {
		@extend .box;
		
		$border_radius: 15px;
		
		//background-color: rgba(147,128,108,.1);
		//border-color: transparent; // Баг

		border-radius: $border_radius;
		border: $border;
		
		//margin: auto;  /* Magic! */
		
		border-width: 7px;
		border-color: darkgrey;

		width: 25% ;
		height: auto;

		margin-bottom: 20px; // Отступ между рядами

		div.img-wrapper {
			// Выравниваем изображения, и заставляем их хвсе занимать одинаковое количество места
			display: flex;
			min-height: 170px;
			min-width: 170px;
		
			img {
				margin: auto;	
			}
		}

		header {
			font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;
			font-weight: bold;
			font-size: $increased_font_size;
		}

		header, div.description, div.numbers, div.links {
			width: 100%;
			box-sizing: border-box;
			padding: 8px 20px;
		}

		div.description {
			max-height:  100px;
			overflow: hidden;
			text-overflow: ellipsis;
			// ellipsis - Не работает, на многострочных текстах, что поделаешь :) 
		
			&:hover {
				// Полная информация - по наведелию мышки
				max-height: none;
			}
		}

		table {
			@extend .pure-table;
	
			width: 100%;

			th, td {
				padding: 3px;
			}
		}

		/* Форматирование ссылок на категорию и торговую марку. 
		   Такие ссылки должны больнее менее на табличку похоже. */
		   
		div.links {
			display: table;
			
			span {
				display: table-cell;	
			}
		}

	}
}

.long_mode {
	/* Режим удлиненого чтения */
	
	padding: 0;

	article {
		width: 100%;
		
		border:none;
		border-bottom: $border;
	}
}
